<!--index.wxml-->
<import is="topicItem" src="/templates/dynamic/dynamic.wxml"/>
<view class="container">
  <view class="search">
    <view class="input">
      <image class="icon"></image>
      <input class="txt" placeholder='动态搜索'></input>
    </view>
  </view>
  <scroll-view 
      class="topic__list"
      scroll-y
      bindscrolltolower="loadMore"
    >
    <swiper class="banner" indicator-dots="true" autoplay="true" interval="3000" duration="1000">
      <swiper-item wx:for="{{banner}}" wx:key="id">
        <image src="{{item.url}}" background-size="cover"></image>
      </swiper-item>
    </swiper>
    <view class="m-menu">
        <view wx:for="{{channel}}" wx:key="id"> 
          <block wx:if="{{item.link}}">
            <navigator class="item" url="{{item.link}}" >
              <image src="{{item.iconUrl}}" background-size="cover"></image>
              <text>{{item.name}}</text>
            </navigator>
          </block>
          <block wx:else>
            <navigator class="item" url="/pages/category/category?id={{item.id}}" >
              <image src="{{item.iconUrl}}" background-size="cover"></image>
              <text>{{item.name}}</text>
            </navigator>
          </block>
        </view>
    </view>
    <view class="spliter-25"></view>
    <view class="a-section a-topic" wx:if="topics.length > 0">
      <view class="h">
        <view>
          <navigator url="/pages/topic/topic">
            <text class="txt">热点动态</text>
          </navigator>
        </view>
      </view>
    </view>

      
      <template
        is="topicItem"
        wx:for="{{lists}}"
        wx:key="{{index}}"
        data="{{item, userId}}"
      />
      <view class="infinite__state">
        <block wx:if="{{dynamicCount > lists.length}}">
          <text>正在加载中...</text>
        </block>
        <block wx:else>
          <text>没有更多数据了</text>
        </block>
      </view>
	</scroll-view>
</view>